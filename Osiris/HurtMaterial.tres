[gd_resource type="ShaderMaterial" load_steps=2 format=2]

[sub_resource type="Shader" id=59]
code = "shader_type canvas_item;

uniform bool active = true;
uniform float luminance_threshold = 0.4;
uniform vec4 color : hint_color = vec4(1.0, 1.0, 1.0, 1.0);

void fragment() {
	vec4 previous_color = texture(TEXTURE, UV);
	vec4 red_color = vec4(1.0, 1.0, 1.0, previous_color.a);
	vec4 new_color = previous_color;

	if (active) {
		float luminance = 0.299 * previous_color.r + 0.587 * previous_color.g + 0.114 * previous_color.b;

		if (luminance > luminance_threshold) {
			new_color = color;
		}
	}

	COLOR = new_color;
}
"

[resource]
shader = SubResource( 59 )
shader_param/active = false
shader_param/luminance_threshold = 0.4
shader_param/color = Color( 1, 1, 1, 1 )
